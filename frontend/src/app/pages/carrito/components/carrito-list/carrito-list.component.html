<div class="max-w-4xl mx-auto p-4 bg-white rounded-2xl shadow-md mt-6">
  <h1 class="text-2xl font-semibold mb-4">Carrito</h1>

  @if(spinner){
    <div class="flex justify-center items-center py-10">
      <p-progress-spinner />
    </div>
  }

  @if(productos && productos.length === 0){
    <p class="text-gray-500 text-center">No hay productos en el carrito.</p>
  }

  @else{
    <div class="overflow-x-auto">
      <table class="min-w-full border border-gray-200 rounded-lg shadow-sm">
        <thead class="bg-gray-100 text-left">
          <tr>
            <th class="p-3">Producto</th>
            <th class="p-3">Imagen</th>
            <th class="p-3">Cantidad</th>
            <th class="p-3">Precio</th>
            <th class="p-3">Subtotal</th>
            <th class="p-3">Eliminar</th>
          </tr>
        </thead>
        <tbody>
          @for(item of productos ; track item.id_item) {
          <tr class="border-t hover:bg-gray-50">
            <td class="p-3">{{ item.nombre }}</td>
            <td class="p-3">
              <img src="{{ item.imagen }}" alt="{{ item.nombre }}" class="w-16 h-16 object-cover rounded-md" />
            </td>
            <td class="p-3">{{ item.cantidad }}</td>
            <td class="p-3">${{ item.precio }}</td>
            <td class="p-3">${{ item.precio * item.cantidad }}</td>
            <td class="p-3">
              <i (click)="eliminarProducto(item.id_item)" class="pi pi-trash"></i>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <div class="mt-4 text-right">
      <p class="text-xl font-semibold">Total: ${{ total }}</p>
      <button (click)="vaciarCarrito()" class="p-button p-component p-button-danger mt-2">
        Vaciar Carrito
      </button>
    </div>
  }
</div>
